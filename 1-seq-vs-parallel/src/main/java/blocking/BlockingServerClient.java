package blocking;

import java.io.IOException;
import java.net.Socket;
import java.util.Scanner;
import java.util.concurrent.CompletableFuture;
import java.util.stream.Collectors;
import java.util.stream.IntStream;

/**
 * Server response: 2020-04-19T21:13:03.908739
 * Server response: 2020-04-19T21:13:03.908315
 * Server response: 2020-04-19T21:13:03.908160
 * Server response: 2020-04-19T21:13:03.908547
 * Server response: 2020-04-19T21:13:03.908892
 * Server response: 2020-04-19T21:13:03.908816
 * Server response: 2020-04-19T21:13:03.908658
 * Server response: 2020-04-19T21:13:03.957764
 * Server response: 2020-04-19T21:13:03.958027
 * Server response: 2020-04-19T21:13:03.958314
 * Server response: 2020-04-19T21:13:03.958694
 * Server response: 2020-04-19T21:13:03.959052
 * Server response: 2020-04-19T21:13:03.959162
 * Server response: 2020-04-19T21:13:03.959263
 * Server response: 2020-04-19T21:13:03.959364
 * Server response: 2020-04-19T21:13:03.959549
 * Server response: 2020-04-19T21:13:03.959682
 * Server response: 2020-04-19T21:13:03.959802
 * Server response: 2020-04-19T21:13:03.960385
 * Server response: 2020-04-19T21:13:03.960660
 * Server response: 2020-04-19T21:13:03.960501
 * Server response: 2020-04-19T21:13:03.960960
 * Server response: 2020-04-19T21:13:03.961132
 * Server response: 2020-04-19T21:13:03.960801
 * Server response: 2020-04-19T21:13:03.961254
 * Server response: 2020-04-19T21:13:03.961646
 * Server response: 2020-04-19T21:13:03.961374
 * Server response: 2020-04-19T21:13:03.961519
 * Server response: 2020-04-19T21:13:03.961796
 * Server response: 2020-04-19T21:13:03.962488
 * Server response: 2020-04-19T21:13:03.962646
 * Server response: 2020-04-19T21:13:03.962830
 * Server response: 2020-04-19T21:13:03.962979
 * Server response: 2020-04-19T21:13:03.963129
 * Server response: 2020-04-19T21:13:03.963385
 * Server response: 2020-04-19T21:13:03.963493
 * Server response: 2020-04-19T21:13:03.963610
 * Server response: 2020-04-19T21:13:03.963272
 * Server response: 2020-04-19T21:13:03.963832
 * Server response: 2020-04-19T21:13:03.963721
 * Server response: 2020-04-19T21:13:03.964104
 * Server response: 2020-04-19T21:13:03.963985
 * Server response: 2020-04-19T21:13:03.964761
 * Server response: 2020-04-19T21:13:03.964881
 * Server response: 2020-04-19T21:13:03.964991
 * Server response: 2020-04-19T21:13:03.965094
 * Server response: 2020-04-19T21:13:03.965232
 * Server response: 2020-04-19T21:13:03.965375
 * Server response: 2020-04-19T21:13:03.965493
 * Server response: 2020-04-19T21:13:03.965602
 * Server response: 2020-04-19T21:13:03.966345
 * Server response: 2020-04-19T21:13:03.966467
 * Server response: 2020-04-19T21:13:03.966570
 * Server response: 2020-04-19T21:13:03.966824
 * Server response: 2020-04-19T21:13:03.967229
 * Server response: 2020-04-19T21:13:03.966679
 * Server response: 2020-04-19T21:13:03.966965
 * Server response: 2020-04-19T21:13:03.967343
 * Server response: 2020-04-19T21:13:03.967111
 * Server response: 2020-04-19T21:13:03.967470
 * Server response: 2020-04-19T21:13:03.968177
 * Server response: 2020-04-19T21:13:03.968345
 * Server response: 2020-04-19T21:13:03.968492
 * Server response: 2020-04-19T21:13:03.968779
 * Server response: 2020-04-19T21:13:03.968638
 * Server response: 2020-04-19T21:13:03.968899
 * Server response: 2020-04-19T21:13:03.969035
 * Server response: 2020-04-19T21:13:03.969152
 * Server response: 2020-04-19T21:13:03.969756
 * Server response: 2020-04-19T21:13:03.969974
 * Server response: 2020-04-19T21:13:03.970447
 * Server response: 2020-04-19T21:13:03.970770
 * Server response: 2020-04-19T21:13:03.970999
 * Server response: 2020-04-19T21:13:03.971418
 * Server response: 2020-04-19T21:13:03.971695
 * Server response: 2020-04-19T21:13:03.971887
 * Server response: 2020-04-19T21:13:03.971210
 * Server response: 2020-04-19T21:13:03.972293
 * Server response: 2020-04-19T21:13:03.972520
 * Server response: 2020-04-19T21:13:03.972668
 * Server response: 2020-04-19T21:13:03.972975
 * Server response: 2020-04-19T21:13:03.972126
 * Server response: 2020-04-19T21:13:03.973167
 * Server response: 2020-04-19T21:13:03.972805
 * Server response: 2020-04-19T21:13:03.973321
 * Server response: 2020-04-19T21:13:03.974217
 * Server response: 2020-04-19T21:13:03.974551
 * Server response: 2020-04-19T21:13:03.974660
 * Server response: 2020-04-19T21:13:03.974431
 * Server response: 2020-04-19T21:13:03.974854
 * Server response: 2020-04-19T21:13:03.975121
 * Server response: 2020-04-19T21:13:03.975336
 * Server response: 2020-04-19T21:13:03.974977
 * Server response: 2020-04-19T21:13:03.975897
 * Server response: 2020-04-19T21:13:03.976150
 * Server response: 2020-04-19T21:13:03.976321
 * Server response: 2020-04-19T21:13:03.976427
 * Server response: 2020-04-19T21:13:03.975233
 * Server response: 2020-04-19T21:13:03.976577
 * Server response: 2020-04-19T21:13:03.976042
 * Server response: 2020-04-19T21:13:03.977192
 * Server response: 2020-04-19T21:13:03.977333
 * Server response: 2020-04-19T21:13:03.977444
 * Server response: 2020-04-19T21:13:03.977700
 * Server response: 2020-04-19T21:13:03.977833
 * Server response: 2020-04-19T21:13:03.977935
 * Server response: 2020-04-19T21:13:03.978034
 * Server response: 2020-04-19T21:13:03.977585
 * Server response: 2020-04-19T21:13:03.978677
 * Server response: 2020-04-19T21:13:03.979099
 * Server response: 2020-04-19T21:13:03.978799
 * Server response: 2020-04-19T21:13:03.978900
 * Server response: 2020-04-19T21:13:03.979204
 * Server response: 2020-04-19T21:13:03.978998
 * Server response: 2020-04-19T21:13:03.979316
 * Server response: 2020-04-19T21:13:03.980074
 * Server response: 2020-04-19T21:13:03.979931
 * Server response: 2020-04-19T21:13:03.980340
 * Server response: 2020-04-19T21:13:03.980218
 * Server response: 2020-04-19T21:13:03.980448
 * Server response: 2020-04-19T21:13:03.981195
 * Server response: 2020-04-19T21:13:03.981447
 * Server response: 2020-04-19T21:13:03.980549
 * Server response: 2020-04-19T21:13:03.981614
 * Server response: 2020-04-19T21:13:03.981751
 * Server response: 2020-04-19T21:13:03.981306
 * Server response: 2020-04-19T21:13:03.982174
 * Server response: 2020-04-19T21:13:03.982290
 * Server response: 2020-04-19T21:13:03.982409
 * Server response: 2020-04-19T21:13:03.981072
 * Server response: 2020-04-19T21:13:03.982606
 * Server response: 2020-04-19T21:13:03.982734
 * Server response: 2020-04-19T21:13:03.982898
 * Server response: 2020-04-19T21:13:03.982511
 * Server response: 2020-04-19T21:13:03.983818
 * Server response: 2020-04-19T21:13:03.983948
 * Server response: 2020-04-19T21:13:03.984078
 * Server response: 2020-04-19T21:13:03.984570
 * Server response: 2020-04-19T21:13:03.984211
 * Server response: 2020-04-19T21:13:03.984337
 * Server response: 2020-04-19T21:13:03.984467
 * Server response: 2020-04-19T21:13:03.986523
 * Server response: 2020-04-19T21:13:03.985873
 * Server response: 2020-04-19T21:13:03.986030
 * Server response: 2020-04-19T21:13:03.986136
 * Server response: 2020-04-19T21:13:03.986283
 * Server response: 2020-04-19T21:13:03.986417
 * Server response: 2020-04-19T21:13:03.987853
 * Server response: 2020-04-19T21:13:03.987967
 * Server response: 2020-04-19T21:13:03.986631
 * Server response: 2020-04-19T21:13:03.988309
 * Server response: 2020-04-19T21:13:03.988073
 * Server response: 2020-04-19T21:13:03.988168
 * Server response: 2020-04-19T21:13:03.988449
 * Server response: 2020-04-19T21:13:03.989441
 * Server response: 2020-04-19T21:13:03.989687
 * Server response: 2020-04-19T21:13:03.989905
 * Server response: 2020-04-19T21:13:03.990131
 * Server response: 2020-04-19T21:13:03.989804
 * Server response: 2020-04-19T21:13:03.990003
 * Server response: 2020-04-19T21:13:03.991250
 * Server response: 2020-04-19T21:13:03.990996
 * Server response: 2020-04-19T21:13:03.991126
 * Server response: 2020-04-19T21:13:03.990798
 * Server response: 2020-04-19T21:13:03.990671
 * Server response: 2020-04-19T21:13:03.990897
 * Server response: 2020-04-19T21:13:03.992046
 * Server response: 2020-04-19T21:13:03.991932
 * Server response: 2020-04-19T21:13:03.992146
 * Server response: 2020-04-19T21:13:03.992476
 * Server response: 2020-04-19T21:13:03.992582
 * Server response: 2020-04-19T21:13:03.992247
 * Server response: 2020-04-19T21:13:03.993147
 * Server response: 2020-04-19T21:13:03.993250
 * Server response: 2020-04-19T21:13:03.993033
 * Server response: 2020-04-19T21:13:03.992339
 * Server response: 2020-04-19T21:13:03.993382
 * Server response: 2020-04-19T21:13:03.993609
 * Server response: 2020-04-19T21:13:03.993858
 * Server response: 2020-04-19T21:13:03.993753
 * Server response: 2020-04-19T21:13:03.994020
 * Server response: 2020-04-19T21:13:03.994133
 * Server response: 2020-04-19T21:13:03.994259
 * Server response: 2020-04-19T21:13:03.994370
 * Server response: 2020-04-19T21:13:03.994467
 * Server response: 2020-04-19T21:13:03.995395
 * Server response: 2020-04-19T21:13:03.995719
 * Server response: 2020-04-19T21:13:03.995518
 * Server response: 2020-04-19T21:13:03.995854
 * Server response: 2020-04-19T21:13:03.995953
 * Server response: 2020-04-19T21:13:03.996052
 * Server response: 2020-04-19T21:13:03.996985
 * Server response: 2020-04-19T21:13:03.995620
 * Server response: 2020-04-19T21:13:03.997096
 * Server response: 2020-04-19T21:13:03.996862
 * Server response: 2020-04-19T21:13:03.997392
 * Server response: 2020-04-19T21:13:03.997490
 * Server response: 2020-04-19T21:13:03.997293
 * Server response: 2020-04-19T21:13:03.998205
 * Server response: 2020-04-19T21:13:03.998324
 * Server response: 2020-04-19T21:13:03.997194
 * Server response: 2020-04-19T21:13:03.998567
 * Server response: 2020-04-19T21:13:03.998760
 * Server response: 2020-04-19T21:13:03.999044
 * Server response: 2020-04-19T21:13:03.998920
 * Server response: 2020-04-19T21:13:03.998460
 * Server response: 2020-04-19T21:13:03.999323
 * Server response: 2020-04-19T21:13:03.999434
 * Server response: 2020-04-19T21:13:03.999193
 * Server response: 2020-04-19T21:13:03.999758
 * Server response: 2020-04-19T21:13:03.999869
 * Server response: 2020-04-19T21:13:03.999980
 * Server response: 2020-04-19T21:13:04.000638
 * Server response: 2020-04-19T21:13:04.000751
 * Server response: 2020-04-19T21:13:04.000989
 * Server response: 2020-04-19T21:13:04.001109
 * Server response: 2020-04-19T21:13:04.001248
 * Server response: 2020-04-19T21:13:04.001390
 * Server response: 2020-04-19T21:13:04.001696
 * Server response: 2020-04-19T21:13:04.002040
 * Server response: 2020-04-19T21:13:04.001508
 * Server response: 2020-04-19T21:13:04.002188
 * Server response: 2020-04-19T21:13:04.002744
 * Server response: 2020-04-19T21:13:04.002915
 * Server response: 2020-04-19T21:13:04.003463
 * Server response: 2020-04-19T21:13:04.001605
 * Server response: 2020-04-19T21:13:04.003584
 * Server response: 2020-04-19T21:13:04.003691
 * Server response: 2020-04-19T21:13:04.003834
 * Server response: 2020-04-19T21:13:04.002600
 * Server response: 2020-04-19T21:13:04.003951
 * Server response: 2020-04-19T21:13:04.005046
 * Server response: 2020-04-19T21:13:04.005181
 * Server response: 2020-04-19T21:13:04.005309
 * Server response: 2020-04-19T21:13:04.005569
 * Server response: 2020-04-19T21:13:04.005454
 * Server response: 2020-04-19T21:13:04.006081
 * Server response: 2020-04-19T21:13:04.005724
 * Server response: 2020-04-19T21:13:04.006167
 * Server response: 2020-04-19T21:13:04.006477
 * Server response: 2020-04-19T21:13:04.005987
 * Server response: 2020-04-19T21:13:04.006288
 * Server response: 2020-04-19T21:13:04.006909
 * Server response: 2020-04-19T21:13:04.007128
 * Server response: 2020-04-19T21:13:04.007242
 * Server response: 2020-04-19T21:13:04.007343
 * Server response: 2020-04-19T21:13:04.007445
 * Server response: 2020-04-19T21:13:04.007544
 * Server response: 2020-04-19T21:13:04.005879
 * Server response: 2020-04-19T21:13:04.007757
 * Server response: 2020-04-19T21:13:04.007652
 * Server response: 2020-04-19T21:13:04.008867
 * Server response: 2020-04-19T21:13:04.009175
 * Server response: 2020-04-19T21:13:04.009082
 * Server response: 2020-04-19T21:13:04.008574
 * Server response: 2020-04-19T21:13:04.009295
 * Server response: 2020-04-19T21:13:04.008730
 * Server response: 2020-04-19T21:13:04.009971
 * Server response: 2020-04-19T21:13:04.010246
 * Server response: 2020-04-19T21:13:04.010381
 * Server response: 2020-04-19T21:13:04.010955
 * Server response: 2020-04-19T21:13:04.011087
 * Server response: 2020-04-19T21:13:04.010099
 * Server response: 2020-04-19T21:13:04.011512
 * Server response: 2020-04-19T21:13:04.011337
 * Server response: 2020-04-19T21:13:04.008984
 * Server response: 2020-04-19T21:13:04.012143
 * Server response: 2020-04-19T21:13:04.012687
 * Server response: 2020-04-19T21:13:04.012855
 * Server response: 2020-04-19T21:13:04.013323
 * Server response: 2020-04-19T21:13:04.012967
 * Server response: 2020-04-19T21:13:04.013146
 * Server response: 2020-04-19T21:13:04.013471
 * Server response: 2020-04-19T21:13:04.013683
 * Server response: 2020-04-19T21:13:04.014863
 * Server response: 2020-04-19T21:13:04.015119
 * Server response: 2020-04-19T21:13:04.015209
 * Server response: 2020-04-19T21:13:04.015300
 * Server response: 2020-04-19T21:13:04.015023
 * Server response: 2020-04-19T21:13:04.015544
 * Server response: 2020-04-19T21:13:04.016644
 * Server response: 2020-04-19T21:13:04.016767
 * Server response: 2020-04-19T21:13:04.015432
 * Server response: 2020-04-19T21:13:04.016876
 * Server response: 2020-04-19T21:13:04.016965
 * Server response: 2020-04-19T21:13:04.017052
 * Server response: 2020-04-19T21:13:04.017263
 * Server response: 2020-04-19T21:13:04.017355
 * Server response: 2020-04-19T21:13:04.017447
 * Server response: 2020-04-19T21:13:04.017170
 * Server response: 2020-04-19T21:13:04.019217
 * Server response: 2020-04-19T21:13:04.019425
 * Server response: 2020-04-19T21:13:04.018808
 * Server response: 2020-04-19T21:13:04.019520
 * Server response: 2020-04-19T21:13:04.019079
 * Server response: 2020-04-19T21:13:04.019321
 * Server response: 2020-04-19T21:13:04.018963
 * Server response: 2020-04-19T21:13:04.020995
 * Server response: 2020-04-19T21:13:04.021461
 * Server response: 2020-04-19T21:13:04.022395
 * Server response: 2020-04-19T21:13:04.022620
 * Server response: 2020-04-19T21:13:04.023159
 * Server response: 2020-04-19T21:13:04.023338
 * Server response: 2020-04-19T21:13:04.023838
 * Server response: 2020-04-19T21:13:04.024040
 * Server response: 2020-04-19T21:13:04.024180
 * Server response: 2020-04-19T21:13:04.024443
 * Server response: 2020-04-19T21:13:04.024625
 * Server response: 2020-04-19T21:13:04.024730
 * Server response: 2020-04-19T21:13:04.024317
 * Server response: 2020-04-19T21:13:04.024842
 * Server response: 2020-04-19T21:13:04.024959
 * Server response: 2020-04-19T21:13:04.025354
 * Server response: 2020-04-19T21:13:04.025484
 * Server response: 2020-04-19T21:13:04.025747
 * Server response: 2020-04-19T21:13:04.025856
 * Server response: 2020-04-19T21:13:04.026004
 * Server response: 2020-04-19T21:13:04.026199
 * Server response: 2020-04-19T21:13:04.026104
 * Server response: 2020-04-19T21:13:04.026333
 * Server response: 2020-04-19T21:13:04.026584
 * Server response: 2020-04-19T21:13:04.027066
 * Server response: 2020-04-19T21:13:04.027225
 * Server response: 2020-04-19T21:13:04.026709
 * Server response: 2020-04-19T21:13:04.027436
 * Server response: 2020-04-19T21:13:04.027327
 * Server response: 2020-04-19T21:13:04.026960
 * Server response: 2020-04-19T21:13:04.027860
 * Server response: 2020-04-19T21:13:04.026841
 * Server response: 2020-04-19T21:13:04.028909
 * Server response: 2020-04-19T21:13:04.029508
 * Server response: 2020-04-19T21:13:04.029377
 * Server response: 2020-04-19T21:13:04.029084
 * Server response: 2020-04-19T21:13:04.029206
 * Server response: 2020-04-19T21:13:04.028625
 * Server response: 2020-04-19T21:13:04.029867
 * Server response: 2020-04-19T21:13:04.030001
 * Server response: 2020-04-19T21:13:04.031071
 * Server response: 2020-04-19T21:13:04.031257
 * Server response: 2020-04-19T21:13:04.030855
 * Server response: 2020-04-19T21:13:04.031164
 * Server response: 2020-04-19T21:13:04.031349
 * Server response: 2020-04-19T21:13:04.031993
 * Server response: 2020-04-19T21:13:04.032164
 * Server response: 2020-04-19T21:13:04.031879
 * Server response: 2020-04-19T21:13:04.032079
 * Server response: 2020-04-19T21:13:04.030974
 * Server response: 2020-04-19T21:13:04.032429
 * Server response: 2020-04-19T21:13:04.032941
 * Server response: 2020-04-19T21:13:04.033083
 * Server response: 2020-04-19T21:13:04.033461
 * Server response: 2020-04-19T21:13:04.033695
 * Server response: 2020-04-19T21:13:04.033837
 * Server response: 2020-04-19T21:13:04.033574
 * Server response: 2020-04-19T21:13:04.033995
 * Server response: 2020-04-19T21:13:04.034102
 * Server response: 2020-04-19T21:13:04.034352
 * Server response: 2020-04-19T21:13:04.034462
 * Server response: 2020-04-19T21:13:04.034227
 * Server response: 2020-04-19T21:13:04.034559
 * Server response: 2020-04-19T21:13:04.036067
 * Server response: 2020-04-19T21:13:04.036305
 * Server response: 2020-04-19T21:13:04.035853
 * Server response: 2020-04-19T21:13:04.036450
 * Server response: 2020-04-19T21:13:04.035970
 * Server response: 2020-04-19T21:13:04.036655
 * Server response: 2020-04-19T21:13:04.036868
 * Server response: 2020-04-19T21:13:04.037069
 * Server response: 2020-04-19T21:13:04.039162
 * Server response: 2020-04-19T21:13:04.039571
 * Server response: 2020-04-19T21:13:04.040286
 * Server response: 2020-04-19T21:13:04.039760
 * Server response: 2020-04-19T21:13:04.039923
 * Server response: 2020-04-19T21:13:04.039414
 * Server response: 2020-04-19T21:13:04.040131
 * Server response: 2020-04-19T21:13:04.041689
 * Server response: 2020-04-19T21:13:04.042201
 * Server response: 2020-04-19T21:13:04.042392
 * Server response: 2020-04-19T21:13:04.042483
 * Server response: 2020-04-19T21:13:04.042045
 * Server response: 2020-04-19T21:13:04.042301
 * Server response: 2020-04-19T21:13:04.043113
 * Server response: 2020-04-19T21:13:04.043328
 * Server response: 2020-04-19T21:13:04.041877
 * Server response: 2020-04-19T21:13:04.043526
 * Server response: 2020-04-19T21:13:04.043242
 * Server response: 2020-04-19T21:13:04.043662
 * Server response: 2020-04-19T21:13:04.043404
 * Server response: 2020-04-19T21:13:04.043759
 * Server response: 2020-04-19T21:13:04.057015
 * Server response: 2020-04-19T21:13:04.057188
 * Server response: 2020-04-19T21:13:04.057359
 * Server response: 2020-04-19T21:13:04.057283
 * Server response: 2020-04-19T21:13:04.057435
 * Server response: 2020-04-19T21:13:04.059879
 * Server response: 2020-04-19T21:13:04.060116
 * Server response: 2020-04-19T21:13:04.060268
 * Server response: 2020-04-19T21:13:04.060354
 * Server response: 2020-04-19T21:13:04.060459
 * Server response: 2020-04-19T21:13:04.060559
 * Server response: 2020-04-19T21:13:04.060631
 * Server response: 2020-04-19T21:13:04.063194
 * Server response: 2020-04-19T21:13:04.063258
 * Server response: 2020-04-19T21:13:04.063317
 * Server response: 2020-04-19T21:13:04.062814
 * Server response: 2020-04-19T21:13:04.063127
 * Server response: 2020-04-19T21:13:04.062976
 * Server response: 2020-04-19T21:13:04.064930
 * Server response: 2020-04-19T21:13:04.065013
 * Server response: 2020-04-19T21:13:04.065095
 * Server response: 2020-04-19T21:13:04.064683
 * Server response: 2020-04-19T21:13:04.064824
 * Server response: 2020-04-19T21:13:04.063058
 * Server response: 2020-04-19T21:13:04.066716
 * Server response: 2020-04-19T21:13:04.067552
 * Server response: 2020-04-19T21:13:04.067672
 * Server response: 2020-04-19T21:13:04.067781
 * Server response: 2020-04-19T21:13:04.067892
 * Server response: 2020-04-19T21:13:04.067351
 * Server response: 2020-04-19T21:13:04.068633
 * Server response: 2020-04-19T21:13:04.068759
 * Server response: 2020-04-19T21:13:04.069031
 * Server response: 2020-04-19T21:13:04.068854
 * Server response: 2020-04-19T21:13:04.068944
 * Server response: 2020-04-19T21:13:04.069723
 * Server response: 2020-04-19T21:13:04.069975
 * Server response: 2020-04-19T21:13:04.070192
 * Server response: 2020-04-19T21:13:04.071215
 * Server response: 2020-04-19T21:13:04.071595
 * Server response: 2020-04-19T21:13:04.071728
 * Server response: 2020-04-19T21:13:04.071847
 * Server response: 2020-04-19T21:13:04.071946
 * Server response: 2020-04-19T21:13:04.072145
 * Server response: 2020-04-19T21:13:04.071359
 * Server response: 2020-04-19T21:13:04.071007
 * Server response: 2020-04-19T21:13:04.073525
 * Server response: 2020-04-19T21:13:04.073676
 * Server response: 2020-04-19T21:13:04.073770
 * Server response: 2020-04-19T21:13:04.073849
 * Server response: 2020-04-19T21:13:04.073919
 * Server response: 2020-04-19T21:13:04.074178
 * Server response: 2020-04-19T21:13:04.074062
 * Server response: 2020-04-19T21:13:04.074974
 * Server response: 2020-04-19T21:13:04.074789
 * Server response: 2020-04-19T21:13:04.075042
 * Server response: 2020-04-19T21:13:04.074897
 * Server response: 2020-04-19T21:13:04.075173
 * Server response: 2020-04-19T21:13:04.075983
 * Server response: 2020-04-19T21:13:04.075887
 * Server response: 2020-04-19T21:13:04.076088
 * Server response: 2020-04-19T21:13:04.076232
 * Server response: 2020-04-19T21:13:04.075108
 * Server response: 2020-04-19T21:13:04.076291
 * Server response: 2020-04-19T21:13:04.076168
 * Server response: 2020-04-19T21:13:04.076985
 * Server response: 2020-04-19T21:13:04.077049
 * Server response: 2020-04-19T21:13:04.076830
 * Server response: 2020-04-19T21:13:04.076916
 * Server response: 2020-04-19T21:13:04.077576
 * Server response: 2020-04-19T21:13:04.077468
 * Server response: 2020-04-19T21:13:04.077676
 * Server response: 2020-04-19T21:13:04.077784
 * Server response: 2020-04-19T21:13:04.077871
 * Server response: 2020-04-19T21:13:04.077939
 * Server response: 2020-04-19T21:13:04.078004
 * Server response: 2020-04-19T21:13:04.078240
 * Server response: 2020-04-19T21:13:04.078351
 * Server response: 2020-04-19T21:13:04.078467
 * Server response: 2020-04-19T21:13:04.078560
 * Server response: 2020-04-19T21:13:04.078651
 * Server response: 2020-04-19T21:13:04.078787
 * Server response: 2020-04-19T21:13:04.078721
 * Server response: 2020-04-19T21:13:04.079053
 * Server response: 2020-04-19T21:13:04.079135
 * Server response: 2020-04-19T21:13:04.079245
 * Server response: 2020-04-19T21:13:04.079390
 * Server response: 2020-04-19T21:13:04.079465
 * Server response: 2020-04-19T21:13:04.079540
 * Server response: 2020-04-19T21:13:04.079607
 * Server response: 2020-04-19T21:13:04.079877
 * Server response: 2020-04-19T21:13:04.079977
 * Server response: 2020-04-19T21:13:04.080057
 * Server response: 2020-04-19T21:13:04.080266
 * Server response: 2020-04-19T21:13:04.080129
 * Server response: 2020-04-19T21:13:04.080199
 * Server response: 2020-04-19T21:13:04.080667
 * Server response: 2020-04-19T21:13:04.080747
 * Server response: 2020-04-19T21:13:04.080818
 * Server response: 2020-04-19T21:13:04.080910
 * Server response: 2020-04-19T21:13:04.080980
 * Server response: 2020-04-19T21:13:04.081043
 * Server response: 2020-04-19T21:13:04.081229
 * Server response: 2020-04-19T21:13:04.081310
 * Server response: 2020-04-19T21:13:04.081406
 * Server response: 2020-04-19T21:13:04.081629
 * Server response: 2020-04-19T21:13:04.081553
 * Server response: 2020-04-19T21:13:04.081696
 * Server response: 2020-04-19T21:13:04.081814
 * Server response: 2020-04-19T21:13:04.081890
 * Server response: 2020-04-19T21:13:04.081961
 */
public class BlockingServerClient {

    public static void main(String[] args) throws IOException {
        var asyncProcesses = IntStream.range(0, 500)
                .mapToObj(x -> x)
                .map(id ->
                        CompletableFuture.supplyAsync(() -> makeACall(id))
                ).collect(Collectors.toList());

        final var tasks = asyncProcesses.toArray(new CompletableFuture[asyncProcesses.size()]);
        CompletableFuture.allOf(tasks).thenApply(__ -> {
            return asyncProcesses.stream()
                    .map(___ -> ___.join())
                    .collect(Collectors.toList());
        }).join();
    }

    private static String makeACall(int id) {
        try {
            var socket = new Socket("localhost", 59090);
            var in = new Scanner(socket.getInputStream());
            String resp = in.nextLine();
            System.out.println("Server response: " + resp);
            return resp;
        } catch (IOException e) {
            e.printStackTrace();
            return "";
        }
    }
}
